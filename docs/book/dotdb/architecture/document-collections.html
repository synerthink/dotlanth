<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Document Collections - Dotlanth Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/custom.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Dotlanth Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/synerthink-organization/dotVM" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/synerthink-organization/dotVM/edit/main/docs/src/dotdb/architecture/document-collections.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="document-collections"><a class="header" href="#document-collections">Document Collections</a></h1>
<p>Document collections are the primary organizational unit in DotDB. They group related documents together and provide the foundation for indexing, querying, and data management operations.</p>
<h2 id="collection-concepts"><a class="header" href="#collection-concepts">Collection Concepts</a></h2>
<h3 id="what-is-a-collection"><a class="header" href="#what-is-a-collection">What is a Collection?</a></h3>
<p>A collection in DotDB is similar to a table in relational databases or a collection in MongoDB. It contains a set of related JSON documents that share common characteristics or serve similar purposes.</p>
<p><strong>Key Properties:</strong></p>
<ul>
<li><strong>Schema-flexible</strong>: Documents in a collection can have different structures</li>
<li><strong>Indexed</strong>: Collections support multiple index types for efficient queries</li>
<li><strong>Isolated</strong>: Collections provide logical separation of data</li>
<li><strong>Scalable</strong>: Collections can grow to handle large datasets</li>
</ul>
<h3 id="collection-naming"><a class="header" href="#collection-naming">Collection Naming</a></h3>
<p>Collection names must follow specific rules:</p>
<p><strong>Valid Names:</strong></p>
<ul>
<li>Must start with a letter or underscore</li>
<li>Can contain letters, numbers, underscores, and hyphens</li>
<li>Case-sensitive</li>
<li>Maximum length: 64 characters</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><code>users           ✓ Valid
user_profiles   ✓ Valid
user-data       ✓ Valid
_system         ✓ Valid
123users        ✗ Invalid (starts with number)
user@data       ✗ Invalid (contains @)
</code></pre>
<h2 id="collection-structure"><a class="header" href="#collection-structure">Collection Structure</a></h2>
<h3 id="physical-layout"><a class="header" href="#physical-layout">Physical Layout</a></h3>
<p>Each collection has its own directory structure:</p>
<pre><code>collections/
└── users/
    ├── metadata.json      # Collection metadata
    ├── data/             # Document storage
    │   ├── segment_001.db
    │   ├── segment_002.db
    │   └── ...
    ├── indices/          # Index files
    │   ├── primary.idx   # Primary key index
    │   ├── email.idx     # Secondary indices
    │   └── ...
    └── wal/              # Write-ahead log
        ├── wal_001.log
        └── ...
</code></pre>
<h3 id="metadata-structure"><a class="header" href="#metadata-structure">Metadata Structure</a></h3>
<p>Collection metadata is stored in <code>metadata.json</code>:</p>
<pre><code class="language-json">{
  "name": "users",
  "created_at": "2025-01-01T00:00:00Z",
  "updated_at": "2025-01-01T12:00:00Z",
  "document_count": 1500,
  "total_size": 1048576,
  "indices": [
    {
      "name": "primary",
      "type": "btree",
      "fields": ["_id"],
      "unique": true
    },
    {
      "name": "email_idx",
      "type": "hash",
      "fields": ["email"],
      "unique": true
    }
  ],
  "settings": {
    "auto_index": true,
    "compression": "lz4",
    "segment_size": 67108864
  }
}
</code></pre>
<h2 id="document-storage"><a class="header" href="#document-storage">Document Storage</a></h2>
<h3 id="document-format"><a class="header" href="#document-format">Document Format</a></h3>
<p>Documents are stored as JSON with additional metadata:</p>
<pre><code class="language-json">{
  "_id": "user_123",
  "_version": 1,
  "_created_at": "2025-01-01T00:00:00Z",
  "_updated_at": "2025-01-01T00:00:00Z",
  "name": "Alice Johnson",
  "email": "alice@example.com",
  "age": 30,
  "preferences": {
    "theme": "dark",
    "notifications": true
  }
}
</code></pre>
<h3 id="system-fields"><a class="header" href="#system-fields">System Fields</a></h3>
<p>DotDB automatically adds system fields to each document:</p>
<div class="table-wrapper"><table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_id</code></td><td>String</td><td>Unique document identifier</td></tr>
<tr><td><code>_version</code></td><td>Integer</td><td>Document version number</td></tr>
<tr><td><code>_created_at</code></td><td>Timestamp</td><td>Document creation time</td></tr>
<tr><td><code>_updated_at</code></td><td>Timestamp</td><td>Last modification time</td></tr>
<tr><td><code>_size</code></td><td>Integer</td><td>Document size in bytes</td></tr>
</tbody></table>
</div>
<h3 id="document-identifiers"><a class="header" href="#document-identifiers">Document Identifiers</a></h3>
<p>Document IDs can be:</p>
<ul>
<li><strong>Auto-generated</strong>: UUIDs generated by DotDB</li>
<li><strong>User-provided</strong>: Custom strings provided by the application</li>
<li><strong>Composite</strong>: Generated from multiple fields</li>
</ul>
<p><strong>Examples:</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Auto-generated ID
put_document("users", None, document) // Returns generated ID

// User-provided ID
put_document("users", Some("user_123"), document)

// Composite ID (application logic)
let id = format!("{}_{}", user.email, user.created_at);
put_document("users", Some(&amp;id), document)
<span class="boring">}</span></code></pre></pre>
<h2 id="collection-operations"><a class="header" href="#collection-operations">Collection Operations</a></h2>
<h3 id="creating-collections"><a class="header" href="#creating-collections">Creating Collections</a></h3>
<p>Collections can be created explicitly or implicitly:</p>
<p><strong>Explicit Creation:</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Create collection with default settings
create_collection("users")?;

// Create collection with custom settings
let settings = CollectionSettings {
    auto_index: true,
    compression: CompressionType::Lz4,
    segment_size: 64 * 1024 * 1024, // 64MB
};
create_collection_with_settings("users", settings)?;
<span class="boring">}</span></code></pre></pre>
<p><strong>Implicit Creation:</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Collection created automatically on first document insert
put_document("new_collection", "doc_1", document)?;
<span class="boring">}</span></code></pre></pre>
<h3 id="listing-collections"><a class="header" href="#listing-collections">Listing Collections</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Get all collection names
let collections = list_collections()?;

// Get collection metadata
let metadata = get_collection_metadata("users")?;

// Get collection statistics
let stats = get_collection_stats("users")?;
<span class="boring">}</span></code></pre></pre>
<h3 id="dropping-collections"><a class="header" href="#dropping-collections">Dropping Collections</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Drop collection and all its data
drop_collection("users")?;

// Drop collection with confirmation
drop_collection_confirmed("users", "users")?;
<span class="boring">}</span></code></pre></pre>
<h2 id="indexing"><a class="header" href="#indexing">Indexing</a></h2>
<h3 id="index-types"><a class="header" href="#index-types">Index Types</a></h3>
<p>DotDB supports multiple index types:</p>
<h4 id="primary-index-b-tree"><a class="header" href="#primary-index-b-tree">Primary Index (B+ Tree)</a></h4>
<ul>
<li><strong>Purpose</strong>: Unique document identification</li>
<li><strong>Fields</strong>: <code>_id</code> field</li>
<li><strong>Properties</strong>: Always unique, automatically created</li>
</ul>
<h4 id="secondary-indices"><a class="header" href="#secondary-indices">Secondary Indices</a></h4>
<p><strong>Hash Index:</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>create_index("users", "email_idx", IndexType::Hash, &amp;["email"], true)?;
<span class="boring">}</span></code></pre></pre>
<ul>
<li><strong>Use Case</strong>: Exact-match queries</li>
<li><strong>Performance</strong>: O(1) lookup time</li>
<li><strong>Limitations</strong>: No range queries</li>
</ul>
<p><strong>B+ Tree Index:</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>create_index("users", "age_idx", IndexType::BTree, &amp;["age"], false)?;
<span class="boring">}</span></code></pre></pre>
<ul>
<li><strong>Use Case</strong>: Range queries, sorting</li>
<li><strong>Performance</strong>: O(log n) lookup time</li>
<li><strong>Features</strong>: Supports range operations</li>
</ul>
<p><strong>Composite Index:</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>create_index("users", "name_age_idx", IndexType::BTree, &amp;["name", "age"], false)?;
<span class="boring">}</span></code></pre></pre>
<ul>
<li><strong>Use Case</strong>: Multi-field queries</li>
<li><strong>Performance</strong>: Efficient for prefix queries</li>
<li><strong>Order</strong>: Field order matters</li>
</ul>
<h3 id="index-management"><a class="header" href="#index-management">Index Management</a></h3>
<p><strong>Creating Indices:</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Simple index
create_index("users", "email_idx", IndexType::Hash, &amp;["email"], true)?;

// Composite index
create_index("users", "location_idx", IndexType::BTree, &amp;["city", "state"], false)?;

// Partial index (planned feature)
create_partial_index("users", "active_users", &amp;["status"], "status = 'active'")?;
<span class="boring">}</span></code></pre></pre>
<p><strong>Managing Indices:</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// List indices for a collection
let indices = list_indices("users")?;

// Drop an index
drop_index("users", "email_idx")?;

// Rebuild an index
rebuild_index("users", "email_idx")?;

// Get index statistics
let stats = get_index_stats("users", "email_idx")?;
<span class="boring">}</span></code></pre></pre>
<h2 id="collection-settings"><a class="header" href="#collection-settings">Collection Settings</a></h2>
<h3 id="configuration-options"><a class="header" href="#configuration-options">Configuration Options</a></h3>
<p>Collections support various configuration options:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct CollectionSettings {
    pub auto_index: bool,           // Automatically create indices
    pub compression: CompressionType, // Data compression
    pub segment_size: usize,        // Segment file size
    pub cache_size: usize,          // Collection cache size
    pub sync_mode: SyncMode,        // Durability settings
    pub max_document_size: usize,   // Maximum document size
}
<span class="boring">}</span></code></pre></pre>
<h3 id="compression"><a class="header" href="#compression">Compression</a></h3>
<p>DotDB supports multiple compression algorithms:</p>
<ul>
<li><strong>None</strong>: No compression (fastest)</li>
<li><strong>LZ4</strong>: Fast compression with good ratio</li>
<li><strong>Zstd</strong>: Better compression ratio, slower</li>
<li><strong>Snappy</strong>: Google’s compression algorithm</li>
</ul>
<p><strong>Performance Comparison:</strong></p>
<pre><code>Algorithm | Compression Ratio | Speed | CPU Usage
----------|------------------|-------|----------
None      | 1.0x            | ★★★★★ | ★☆☆☆☆
LZ4       | 2.5x            | ★★★★☆ | ★★☆☆☆
Snappy    | 2.2x            | ★★★☆☆ | ★★☆☆☆
Zstd      | 3.5x            | ★★☆☆☆ | ★★★☆☆
</code></pre>
<h3 id="sync-modes"><a class="header" href="#sync-modes">Sync Modes</a></h3>
<p>Control durability vs. performance trade-offs:</p>
<ul>
<li><strong>None</strong>: No explicit syncing (fastest, least durable)</li>
<li><strong>Normal</strong>: Sync on transaction commit</li>
<li><strong>Full</strong>: Sync after every write (slowest, most durable)</li>
</ul>
<h2 id="collection-statistics"><a class="header" href="#collection-statistics">Collection Statistics</a></h2>
<h3 id="monitoring-collections"><a class="header" href="#monitoring-collections">Monitoring Collections</a></h3>
<p>DotDB provides comprehensive collection statistics:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct CollectionStats {
    pub document_count: u64,
    pub total_size: u64,
    pub average_document_size: f64,
    pub index_count: usize,
    pub index_size: u64,
    pub segment_count: usize,
    pub compression_ratio: f64,
    pub read_operations: u64,
    pub write_operations: u64,
    pub cache_hit_ratio: f64,
}
<span class="boring">}</span></code></pre></pre>
<h3 id="performance-metrics"><a class="header" href="#performance-metrics">Performance Metrics</a></h3>
<p><strong>Query Performance:</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Get query execution statistics
let query_stats = get_query_stats("users")?;
println!("Average query time: {}ms", query_stats.avg_query_time);
println!("Index usage: {}%", query_stats.index_usage_ratio);
<span class="boring">}</span></code></pre></pre>
<p><strong>Storage Metrics:</strong></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Get storage utilization
let storage_stats = get_storage_stats("users")?;
println!("Storage efficiency: {}%", storage_stats.efficiency);
println!("Fragmentation: {}%", storage_stats.fragmentation);
<span class="boring">}</span></code></pre></pre>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<h3 id="collection-design"><a class="header" href="#collection-design">Collection Design</a></h3>
<ol>
<li><strong>Logical Grouping</strong>: Group related documents together</li>
<li><strong>Size Considerations</strong>: Keep collections manageable (&lt; 10M documents)</li>
<li><strong>Index Strategy</strong>: Create indices for common query patterns</li>
<li><strong>Naming Convention</strong>: Use consistent, descriptive names</li>
</ol>
<h3 id="performance-optimization"><a class="header" href="#performance-optimization">Performance Optimization</a></h3>
<ol>
<li><strong>Index Selection</strong>: Choose appropriate index types</li>
<li><strong>Document Size</strong>: Keep documents reasonably sized (&lt; 1MB)</li>
<li><strong>Batch Operations</strong>: Use bulk operations for better performance</li>
<li><strong>Compression</strong>: Enable compression for large collections</li>
</ol>
<h3 id="schema-design"><a class="header" href="#schema-design">Schema Design</a></h3>
<ol>
<li><strong>Consistent Structure</strong>: Maintain consistent document structure</li>
<li><strong>Field Naming</strong>: Use consistent field naming conventions</li>
<li><strong>Nested Objects</strong>: Limit nesting depth for better performance</li>
<li><strong>Array Fields</strong>: Consider index implications for array fields</li>
</ol>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<h3 id="e-commerce-application"><a class="header" href="#e-commerce-application">E-commerce Application</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Product catalog
create_collection("products")?;
create_index("products", "category_idx", IndexType::BTree, &amp;["category"], false)?;
create_index("products", "price_idx", IndexType::BTree, &amp;["price"], false)?;
create_index("products", "sku_idx", IndexType::Hash, &amp;["sku"], true)?;

// User orders
create_collection("orders")?;
create_index("orders", "user_idx", IndexType::Hash, &amp;["user_id"], false)?;
create_index("orders", "date_idx", IndexType::BTree, &amp;["order_date"], false)?;
create_index("orders", "status_idx", IndexType::Hash, &amp;["status"], false)?;
<span class="boring">}</span></code></pre></pre>
<h3 id="content-management-system"><a class="header" href="#content-management-system">Content Management System</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Articles
create_collection("articles")?;
create_index("articles", "author_idx", IndexType::Hash, &amp;["author_id"], false)?;
create_index("articles", "published_idx", IndexType::BTree, &amp;["published_at"], false)?;
create_index("articles", "category_idx", IndexType::BTree, &amp;["category"], false)?;

// Comments
create_collection("comments")?;
create_index("comments", "article_idx", IndexType::Hash, &amp;["article_id"], false)?;
create_index("comments", "user_idx", IndexType::Hash, &amp;["user_id"], false)?;
<span class="boring">}</span></code></pre></pre>
<h3 id="iot-data-collection"><a class="header" href="#iot-data-collection">IoT Data Collection</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Sensor readings
create_collection("sensor_data")?;
create_index("sensor_data", "device_time_idx", IndexType::BTree, &amp;["device_id", "timestamp"], false)?;
create_index("sensor_data", "type_idx", IndexType::Hash, &amp;["sensor_type"], false)?;

// Device status
create_collection("devices")?;
create_index("devices", "location_idx", IndexType::BTree, &amp;["location"], false)?;
create_index("devices", "status_idx", IndexType::Hash, &amp;["status"], false)?;
<span class="boring">}</span></code></pre></pre>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="common-issues"><a class="header" href="#common-issues">Common Issues</a></h3>
<ol>
<li><strong>Collection Not Found</strong>: Ensure collection exists before operations</li>
<li><strong>Index Conflicts</strong>: Check for duplicate index names</li>
<li><strong>Performance Issues</strong>: Review index usage and query patterns</li>
<li><strong>Storage Growth</strong>: Monitor collection size and implement cleanup</li>
</ol>
<h3 id="diagnostic-commands"><a class="header" href="#diagnostic-commands">Diagnostic Commands</a></h3>
<pre><code class="language-bash"># Collection information
dotdb collections
dotdb count collection_name

# Index information
dotdb list-indices collection_name
dotdb index-stats collection_name index_name

# Performance analysis
dotdb analyze collection_name
dotdb query-plan collection_name "query"
</code></pre>
<p>For more information about working with documents, see <a href="../usage/document-management.html">Document Management</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../dotdb/architecture/state-management.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../dotdb/usage/basic-operations.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../dotdb/architecture/state-management.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../dotdb/usage/basic-operations.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
